<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta charset="utf-8" />
  <title>RailsTreejs</title>
  <link rel="stylesheet" media="all" href="/assets/jquery-ui/theme.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/core.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/accordion.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/menu.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/autocomplete.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/button.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/datepicker.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/draggable.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/resizable.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/dialog.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/progressbar.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/selectable.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/selectmenu.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/sortable.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/slider.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/spinner.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/tabs.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/tooltip.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/base.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/all.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/jquery.treeselect.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/moreorless.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/tree.css?body=1" data-turbolinks-track="true" />
<link rel="stylesheet" media="all" href="/assets/application.css?body=1" data-turbolinks-track="true" />
  <script src="/assets/jquery.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/core.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/widget.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/accordion.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/position.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/menu.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/autocomplete.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/button.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/datepicker.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/mouse.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/draggable.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/resizable.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/dialog.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/droppable.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-blind.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-bounce.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-clip.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-drop.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-explode.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-fade.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-fold.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-highlight.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-size.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-scale.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-puff.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-pulsate.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-shake.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-slide.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/effect-transfer.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/progressbar.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/selectable.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/selectmenu.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/slider.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/sortable.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/spinner.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/tabs.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui/tooltip.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery-ui.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery_ujs.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/turbolinks.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery.chosentree.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery.moreorless.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jquery.treeselect.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/jstree.min.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/tree.js?body=1" data-turbolinks-track="true"></script>
<script src="/assets/application.js?body=1" data-turbolinks-track="true"></script>
  <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="oxt9ZuXkQH5KMN88gsDRQ/wD/SYuLAnNfnSVvLgOPmM=" />

  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <link rel="stylesheet" media="all" href="/assets/jquery-ui/theme.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/core.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/accordion.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/menu.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/autocomplete.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/button.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/datepicker.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/draggable.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/resizable.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/dialog.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/progressbar.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/selectable.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/selectmenu.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/sortable.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/slider.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/spinner.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/tabs.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/tooltip.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/base.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui/all.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery-ui.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/jquery.treeselect.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/moreorless.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/tree.css?body=1" />
<link rel="stylesheet" media="all" href="/assets/application.css?body=1" />
  <script src="/assets/jquery.js?body=1"></script>
<script src="/assets/jquery-ui/core.js?body=1"></script>
<script src="/assets/jquery-ui/widget.js?body=1"></script>
<script src="/assets/jquery-ui/accordion.js?body=1"></script>
<script src="/assets/jquery-ui/position.js?body=1"></script>
<script src="/assets/jquery-ui/menu.js?body=1"></script>
<script src="/assets/jquery-ui/autocomplete.js?body=1"></script>
<script src="/assets/jquery-ui/button.js?body=1"></script>
<script src="/assets/jquery-ui/datepicker.js?body=1"></script>
<script src="/assets/jquery-ui/mouse.js?body=1"></script>
<script src="/assets/jquery-ui/draggable.js?body=1"></script>
<script src="/assets/jquery-ui/resizable.js?body=1"></script>
<script src="/assets/jquery-ui/dialog.js?body=1"></script>
<script src="/assets/jquery-ui/droppable.js?body=1"></script>
<script src="/assets/jquery-ui/effect.js?body=1"></script>
<script src="/assets/jquery-ui/effect-blind.js?body=1"></script>
<script src="/assets/jquery-ui/effect-bounce.js?body=1"></script>
<script src="/assets/jquery-ui/effect-clip.js?body=1"></script>
<script src="/assets/jquery-ui/effect-drop.js?body=1"></script>
<script src="/assets/jquery-ui/effect-explode.js?body=1"></script>
<script src="/assets/jquery-ui/effect-fade.js?body=1"></script>
<script src="/assets/jquery-ui/effect-fold.js?body=1"></script>
<script src="/assets/jquery-ui/effect-highlight.js?body=1"></script>
<script src="/assets/jquery-ui/effect-size.js?body=1"></script>
<script src="/assets/jquery-ui/effect-scale.js?body=1"></script>
<script src="/assets/jquery-ui/effect-puff.js?body=1"></script>
<script src="/assets/jquery-ui/effect-pulsate.js?body=1"></script>
<script src="/assets/jquery-ui/effect-shake.js?body=1"></script>
<script src="/assets/jquery-ui/effect-slide.js?body=1"></script>
<script src="/assets/jquery-ui/effect-transfer.js?body=1"></script>
<script src="/assets/jquery-ui/progressbar.js?body=1"></script>
<script src="/assets/jquery-ui/selectable.js?body=1"></script>
<script src="/assets/jquery-ui/selectmenu.js?body=1"></script>
<script src="/assets/jquery-ui/slider.js?body=1"></script>
<script src="/assets/jquery-ui/sortable.js?body=1"></script>
<script src="/assets/jquery-ui/spinner.js?body=1"></script>
<script src="/assets/jquery-ui/tabs.js?body=1"></script>
<script src="/assets/jquery-ui/tooltip.js?body=1"></script>
<script src="/assets/jquery-ui.js?body=1"></script>
<script src="/assets/jquery_ujs.js?body=1"></script>
<script src="/assets/turbolinks.js?body=1"></script>
<script src="/assets/jquery.chosentree.js?body=1"></script>
<script src="/assets/jquery.moreorless.js?body=1"></script>
<script src="/assets/jquery.treeselect.js?body=1"></script>
<script src="/assets/jstree.min.js?body=1"></script>
<script src="/assets/tree.js?body=1"></script>
<script src="/assets/application.js?body=1"></script>

  <link href="/assets/themes/default/style.min.css" rel="stylesheet" />
</head>
<body>

<div>
  <a href="tree">jstree</a>
  <a href="treeselect">treeselect</a>
</div>

<h2>jstree プラグインの利用例</h2>
* ./app 以下 を Tree 表示する (ajax を利用)
<table>
  <thead>
  </thead>
  <tbody>
    <tr>
      <td width="400" valign="top" nowrap="nowrap">
        <div>
	  <button class="tree_btn" id="ajaxTree_open">open_all</button>
          <button class="tree_btn" id="ajaxTree_close">close_all</button>
          <br />
	   <input type="text" placeholder="try css" style="margin:8px; border-radius:4px;" id="ajaxTree-q" />(部分一致で逐次選択します)
          <div id="ajaxTree" class="jstree jstree-4 jstree-default jstree-default-small" role="tree"><ul class="jstree-container-ul jstree-striped jstree-no-dots jstree-wholerow-ul"><li role="treeitem" aria-expanded="false" id="/assets" class="jstree-node  jstree-closed"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>assets</a></li><li role="treeitem" aria-expanded="false" id="/controllers" class="jstree-node  jstree-closed"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>controllers</a></li><li role="treeitem" aria-expanded="false" id="/helpers" class="jstree-node  jstree-closed"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>helpers</a></li><li role="treeitem" id="/mailers" class="jstree-node  jstree-leaf"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>mailers</a></li><li role="treeitem" aria-expanded="false" id="/models" class="jstree-node  jstree-closed"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>models</a></li><li role="treeitem" aria-expanded="false" id="/views" class="jstree-node  jstree-closed jstree-last"><div unselectable="on" class="jstree-wholerow"> </div><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>views</a></li></ul></div>
        </div>
      </td>
      <td valign="top">
	選択された項目: <span id="file_type"></span> <span id="selected"></span>
	<div id="file_contents_div" style="display: none;">内容：
	  <div id="file"><pre class="tree_pre" id="file_contents"></pre></div>
	</div>
      </td>
  </tr></tbody>
</table>
<hr />

* csv の内容
<table>
  <tbody>
    <tr>
      <td width="400" valign="top" nowrap="nowrap">
	階層化表示
	<div>
	  <button class="tree_btn" id="ajaxTreeCsv_open">open_all</button>
	  <button class="tree_btn" id="ajaxTreeCsv_close">close_all</button>
	</div>
	<div id="ajaxTreeCsv" class="jstree jstree-1 jstree-default jstree-default-responsive" role="tree"><ul class="jstree-container-ul"><li role="treeitem" id="/Title" class="jstree-node  jstree-leaf"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon jstree-file jstree-themeicon-custom"></i><strong>Title</strong>:	    key で階層構造を表現させた {key</a></li><li role="treeitem" aria-expanded="false" id="/A" class="jstree-node  jstree-closed"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i><strong>A</strong></a></li><li role="treeitem" aria-expanded="false" id="/B" class="jstree-node  jstree-closed jstree-last"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i><strong>B</strong></a></li></ul></div>
      </td>
      <td valign="top" nowrap="nowrap">
	CSV のファイル内容
	<pre class="tree_pre">Title,    key で階層構造を表現させた {key, val} の CSV データ
A1,       A_1
A2,       A_2
A2X,      A_2 X
A2B1,     A_2 B_1
A4B1C1,   A 411
A4B1C2,   A 412
B1,       B 1
B2,       B 2
B2X,      B 2 X
B2B1,     B 2 B 1
B4B1C1D1, B 4 1 1 1
B4B1C2D3, B 4 1 2 3</pre>
      </td>
  </tr></tbody>
</table>
<hr />

* HTML List を Tree にする
<div id="listTree" class="jstree jstree-2 jstree-default jstree-default-responsive" role="tree"><ul class="jstree-container-ul"><li role="treeitem" aria-expanded="false" id="Root_1" class="jstree-node  jstree-closed"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>Root node 1
      </a></li><li role="treeitem" aria-expanded="false" id="Root_2" class="jstree-node  jstree-closed jstree-last"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>Root node 2
      </a></li></ul></div>

* json データ を Tree にする
<div>
  <div id="jsonTree" class="jstree jstree-3 jstree-default jstree-default-responsive" role="tree"><ul class="jstree-container-ul"><li role="treeitem" aria-expanded="false" id="node_1" class="jstree-node  jstree-closed"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>Root node</a></li><li role="treeitem" aria-expanded="true" id="node_2" class="jstree-node  jstree-open jstree-last"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor  jstree-clicked" href="#"><i class="jstree-icon jstree-themeicon"></i>Root node with options</a><ul role="group" class="jstree-children"><li role="treeitem" id="node_2_1" class="jstree-node  jstree-leaf"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>Child A</a></li><li role="treeitem" id="node_2_2" class="jstree-node  jstree-leaf jstree-last"><i class="jstree-icon jstree-ocl"></i><a class="jstree-anchor" href="#"><i class="jstree-icon jstree-themeicon"></i>Child B</a></li></ul></li></ul></div>
</div>

<hr />
<pre>  * TODO:
  - javascript を別ファイルにする。coffeescript にする。
  - サーチプラグイン, チェックボックスプラグインを試す。

  * jstree の設定:
  http://www.jstree.com/docs/json/ の download の link から zip ファイルを落としてくる。
  落としてきた vakata-jstree-3.0.0-0-gb446e66.zip を展開して、
  themas/ と *.js を assets/javascritp/ に copy する。

<script>
  $(function () {
    $('#file_contents_div').hide()
    $('#listTree').jstree();

    $('#listTree').on("changed.jstree", function (e, data) {
      // console.log(data.selected);
      $('#selected').text(data.selected);
    });

    $('#jsonTree').jstree({
      'core' : {
        'data' : [
            { 'id': 'node_1', 'text': 'Root node',
              'children' : [
                  { 'id': 'node_1_1', 'text' : 'Child 1' },
                  { 'id': 'node_1_2', 'text' : 'Child 2'}
                ]
            },
            { 'id': 'node_2', 'text': 'Root node with options',
              'state' : { 'opened' : true, 'selected' : true },
              'children' : [
                  { 'id': 'node_2_1', 'text' : 'Child A' },
                  { 'id': 'node_2_2', 'text' : 'Child B'}
                ]
            }
        ]
      }
    });
    $('#jsonTree').on("changed.jstree", function (e, data) {
      // console.log(data.selected);
      $('#selected').text(data.selected);
    });

    // See http://www.jstree.com/demo/  Filebrowser demo
    $('#ajaxTree').jstree({
      'core': {
        'data': {
          'url': function (node) {
            return 'treeData.json?path';
          },
          'data': function (node) {
             return { 'id' : node.id };
          },
          'check_callback': true,
          'error': function (jqXHR, textStatus, errorThrown) {
                      alert("error. " + qXHR.responseText);
                    }
        },
        'themes': {
          'responsive' : false,
          'variant': 'small',
          'stripes' : true
        }
      },
      "types": {
        "file": {
          "icon": 'file'
        }
      },
      "plugins": [ "types", "sort", "search", "wholerow" ]
    });
    $('#ajaxTree_open').click(function() {
      $('#ajaxTree').jstree('open_all');
    });
    $('#ajaxTree_close').click(function() {
      $('#ajaxTree').jstree('close_all');
    });

    // クリックで tree の expand / collapse
    $("#ajaxTree").bind("select_node.jstree", function (e, data) {
      return data.instance.toggle_node(data.node);
    });

    $('#ajaxTree').on("changed.jstree", function (e, data) {
      // console.log(data.selected);
      $('#selected').text(data.selected);
      $('#file_contents_div').hide()
      $('#file_contents').text('')
      if (data.node.original.type == 'file') {
        $('#file_type').text('ファイル');
        show_filedata(data.node.original.id)
      } else {
        $('#file_type').text('ディレクター');
        clear_filedata()
      }
    });

    // path で指定された ./app 以下の ファイルの内容を ajax で得て、画面に表示する。
    // ./app 以下 以外のファイルが指定された時はエラーにすること。
    function show_filedata(path) {
      $.get('/fileData', { path: path },
        function(data) {
          $('#file_contents_div').show()
          $('#file_contents').text(data)
      });
    }

    function show_imagedata(path) {
    }

    function clear_filedata() {
      $('#file_contents_div').hide()
      $('#image_contents_div').hide()
      $('#file_contents').text('')
    }
  });

    $('#ajaxTreeCsv').jstree({
      'core': {
        'data': {
          'url': function (node) {
            return node.id === '#' ? 'treeDataCsv.json' : 'treeDataCsv.json';
          },
          'data' : function (node) {
             return { 'path' : 'test.csv' };
          }
        }
      },
      "types" : {
        "file" : {
          "icon" : 'jstree-file'
        }
      },
      "plugins" : [ "types" ]
    });

    var timeout = false;
    $('#ajaxTree-q').keyup(function () {
      if (timeout) {
        clearTimeout(timeout);
      }
      timeout = setTimeout(function () {
        var v = $('#ajaxTree-q').val();
        $('#ajaxTree').jstree(true).search(v);
      }, 250);
    });

    $('#ajaxTreeCsv').on("changed.jstree", function (e, data) {
      if (data.node.original.attr &amp;&amp; data.node.original.attr.val) {
        $('#csv_contents').text(data.node.original.attr.val)
      } else {
        $('#csv_contents').text('')
      }
    });
    $('#ajaxTreeCsv_open').click(function() {
      $('#ajaxTreeCsv').jstree('open_all');
    });
    $('#ajaxTreeCsv_close').click(function() {
      $('#ajaxTreeCsv').jstree('close_all');
    });
</script>




</pre><ul class="vakata-context"></ul><div id="jstree-marker" style="display: none;"> </div><ul class="vakata-context"></ul><div id="jstree-marker" style="display: none;"> </div></body><canvas id="fxdriver-screenshot-canvas" style="display: none;" width="945" height="1152"></canvas></html>